# Lab 6 实验报告

## 说明
`编程实验在自己的机器上测试时make grade可以得到全部分数。如果助教测试时发生Bug，希望能够进行通知。`

`由于文本编辑器的自动格式化功能，某些文件的结尾多余换行或行尾空格可能被删除。有些删除可能发生在敏感区域（如正确性检查程序），但实际上这些更改并不试图扰乱任何测试机制。`

## 练习1
Round Robin（有译作时间片轮转法），算是一种最传统，最朴素的进程调度算法了。每个进程被分配一个固定数目的时间片，每次时钟中断进程的可用时间片数目就减一，最终减到零时，表明该进程的时间片已经耗尽，应该切换到下一个进程的执行。具体来说，在uCore中，进程调度是通过一个链表来实现的，每次总是选择在开头的进程运行，而进程时间片用尽后，将导致该进程从队列中被移除，resched标记位被置1，最终会使得该进程重新被加入队尾，等待下一次执行。

sched_calss中包含很多成员变量，其用途不一，解释如下：

init：初始化调度程序

enqueue：进程入队，即将一个有可能被运行的进程加入到调度器之中

dequeue：进程出队，将一个进程移除

pick_next：在之前的进程时间片用尽后，选择下一个需要运行的进程

proc_tick：处理硬件时钟中断。

所谓的“多级反馈队列调度算法”应当是可以在uCore当前的框架下实现的，其本质上是由Round Robin算法演进而来，但不只是使用一个队列，而是使用多个队列。每个队列的优先级不同，切换时间也不同，高优先级队列的切换时间短，低优先级的队列切换时间长。而高优先级的进程如果过长时间没有完成任务，则会进入低优先级队列中。这样的算法，兼顾了需要长期大量占用CPU资源的任务和实时性高，但占用时间短的任务。

## 练习2
stride调度算法相对于Round Robin算法的最大改进在于支持进程的优先级。stride算法中每个进程仍有固定的优先级，但是每个进程获得调度权的机会是不一致的。stride算法中队列里每个进程有一个所谓的stride（步幅？）值，每次都选取stride最小的进程。进程被调度后，stride值增加。但是增加的幅度是和金成德优先级有关的，一般设置成一个大的整数除以进程的优先级。这样以来，优先级高的进程每次增加的stride小，被调用的次数也就多了。相比于Round Robin算法，stride算法最好用优先队列来实现以提高性能。实验代码中已经包含了给予Heap的优先队列数据结构。
